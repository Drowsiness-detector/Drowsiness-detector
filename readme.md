### 环境：

pytorch==1.6.0

### 运行demo：

配好环境后， pycharm 运行： detector \ test_camera_pfld_onnx.py

### 量化时间：2s

### 人脸检测+特征点定位：

PFLD

### 疲劳特征：

1. PERCLOS（P70)
2. 打哈欠阈值

### 推理：

SVM

------

### 算法介绍：

待获得输送的图片/视频后，每两秒钟做一次检测，检测**PERCLOS**和**打哈欠的持续时间**这两个特征，其中PERCLOS以P70作为判断标准（即一段时间内“闭眼”时间占据总时间的70%以上，我们即可认定被检测者处于疲劳状态）。打哈欠的持续时间取检测时间内的最大持续时间。当检测结束时间到达时，若还有动作正在进行，检测时间则会延长，直到没有正在进行中的动作为止。检测时间结束后，将两个特征值输送进SVM模型中，由模型给出一个二分的推理：0为正常状态，1为疲劳状态。

### 待解决的问题：

1. 在测试一部分数据集后发现，人脸嘴部的检测可能会由于环境光线\摄像角度\算法设计的原因，出现检测抖动的情况，造成检测持续动作中断的后果，从而影响推理结果。
2. 检测的特征有待增加。

------

### demo效果：

![T_3J_CY~_J_NQ9Z9_N_16A7.png](https://i.loli.net/2021/01/31/4ZD9w8HvyuxGKsR.png)

![N_Y_WXDT_278OM_WADD_P`L.png](https://i.loli.net/2021/01/31/UdhITMucwCb6ly3.png)

![_3_9~EUM_2Z_I9H15Y_7_@E.png](https://i.loli.net/2021/01/31/asyIuADdTjetC2R.png)